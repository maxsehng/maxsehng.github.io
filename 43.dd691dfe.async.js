(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{"3Tr9":function(e,t,a){"use strict";var l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("exa0");var n=l(a("KiF4"));a("NWD0");var r=l(a("2L3m"));a("4ADO");var o=l(a("wty1"));a("NEjA");var i=l(a("g2HK"));a("26gd");var s=l(a("1GiV")),c=u(a("xwgP"));l(a("s21K"));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var l={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(l,r,o):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}class p extends c.Component{constructor(e){super(e),this.onChange=(e=>{e.length>6&&(e=e.slice(-6)),this.setState({selected:e})}),this.onOk=(()=>{var e=this.props.onOk,t=this.state.selected;t.length<4||t.length>6?s.default.error("\u81f3\u5c11\u9009\u62e94\u4e2a\uff1b\u6700\u591a\u9009\u62e96\u4e2a"):e&&e(this.state.selected)}),this.onCancel=(()=>{var e=this.props,t=e.onCancel,a=e.value,l=void 0===a?[]:a;this.setState({selected:l}),t&&t()}),this.render=(()=>{var e=this.props.visible,t=this.state.selected;return c.default.createElement(n.default,{onCancel:this.onCancel,onOk:this.onOk,title:"\u5b57\u6bb5\u8bbe\u7f6e",visible:e},c.default.createElement(i.default.Group,{onChange:this.onChange,value:t},c.default.createElement(r.default,null,this.options.map(e=>{return c.default.createElement(o.default,{span:8,key:e.value},c.default.createElement(i.default,{key:e.value,value:e.value,style:{marginBottom:10}},e.label))}))))}),this.state={selected:e.value},this.options=[{label:"\u540d\u79f0",value:"name"},{label:"\u5728\u7ebf\u72b6\u6001",value:"online"},{label:"\u8d44\u4ea7\u72b6\u6001",value:"assetState"},{label:"\u578b\u53f7",value:"model"},{label:"\u6807\u7b7e",value:"tags"},{label:"\u5730\u5740",value:"address"},{label:"\u5ba2\u6237",value:"companyName"},{label:"\u73af\u56de\u53e30IP",value:"loopback0Ip"},{label:"\u73af\u56de\u53e31IP",value:"loopback1Ip"},{label:"\u8702\u7a9d\u63a5\u53e3IP",value:"cellularIp"},{label:"\u53611IMSI",value:"sim0Imsi"},{label:"\u53612IMSI",value:"sim1Imsi"},{label:"\u8f6f\u4ef6\u7248\u672c\u53f7",value:"softver"},{label:"\u5f53\u524d\u4e0a\u7f51\u5361",value:"currentSim"},{label:"IPsec\u96a7\u9053\u6570\u91cf",value:"ipSecTunnel"},{label:"\u4fe1\u53f7",value:"signalDailyAvg"},{label:"\u8fd0\u884c\u65f6\u957f",value:"uptime"},{label:"\u53611\u672c\u6708\u6d41\u91cf",value:"sim0FlowMonth"},{label:"\u53612\u672c\u6708\u6d41\u91cf",value:"sim1FlowMonth"},{label:"GPS",value:"gps"},{label:"\u53611\u603b\u6d41\u91cf",value:"sim0FlowTotal"},{label:"\u53612\u603b\u6d41\u91cf",value:"sim1FlowTotal"},{label:"\u66f4\u65b0\u65f6\u95f4",value:"gmtModified"}]}componentWillReceiveProps(e,t){this.props.value!=e.value&&this.setState({selected:e.value})}}t.default=p,p.defaultProps={visible:!1,value:[]}},aDEP:function(e,t,a){"use strict";var l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("exa0");var n=l(a("KiF4"));a("6/yB");var r=l(a("SE39"));a("KB86");var o=l(a("m/9F"));a("/gTo");var i=l(a("rP0n"));a("nPjb");var s=l(a("nKmx")),c=l(a("zAuD"));a("yuUY");var d=l(a("2n5t")),u=a("8ur3"),p=k(a("xwgP")),m=a("pG04"),h=l(a("4zaf")),f=l(a("3Tr9")),v=l(a("guZp")),g=l(a("J1Jx")),w=l(a("pOAv")),I=a("7Qib"),y=a("03Q9");function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var l={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(l,r,o):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}var M=d.default.Option;class S extends p.Component{constructor(e){super(e),this.refersh=((e,t,a)=>{var l=this.props.dispatch;e||(e=this.props.filter),l({type:"devServiceMaintainList/fetch",payload:{filter:e,pageNo:t,pageSize:a}})}),this.hideExportModal=(()=>{this.setState({exportVisible:!1})}),this.showExportModal=(()=>{this.setState({exportVisible:!0})}),this.logsExport=(e=>{var t=this.props.showField,a=void 0===t?[]:t,l=this.props.logs.filter,n=Object.keys(l),r={};n.filter(e=>"sn"===e||a.indexOf(e)>-1||a.indexOf("companyName")>-1&&"companyId"===e||e.indexOf("sort_")>-1).forEach(e=>r[e]=l[e]);var o=r&&r.assetState?r.assetState:"",i=r&&r.model?r.model:"",s=r&&r.address?r.address:"",c=r&&r.tags?r.tags:"",d=r&&r.online?r.online:"",u=r&&r.sn?r.sn:"",p=r&&r.companyId?r.companyId:"",m=r&&r.name?r.name:"",h=r&&r.loopback0Ip?r.loopback0Ip:"",f=r&&r.loopback1Ip?r.loopback1Ip:"",v=r&&r.cellularIp?r.cellularIp:"",g=r&&r.sim0Imsi?r.sim0Imsi:"",w=r&&r.sim1Imsi?r.sim1Imsi:"",I=r&&r.softver?r.softver:"",y=r&&r.sort_signalDailyAvg?r.sort_signalDailyAvg:"",b=r&&r.sort_uptime?r.sort_uptime:"",k=r&&r.sort_sim0FlowMonth?r.sort_sim0FlowMonth:"",M=r&&r.sort_sim1FlowMonth?r.sort_sim1FlowMonth:"",S=r&&r.sort_sim0FlowTotal?r.sort_sim0FlowTotal:"",E=r&&r.sort_sim1FlowTotal?r.sort_sim1FlowTotal:"",x=r&&r.sort_gmtModified?r.sort_gmtModified:"";window.open("/devServiceMaintain/export"+"?assetState=".concat(o)+"&model=".concat(i)+"&address=".concat(s)+"&tags=".concat(c)+"&online=".concat(d)+"&sn=".concat(u)+"&companyId=".concat(p)+"&name=".concat(m)+"&loopback0Ip=".concat(h)+"&loopback1Ip=".concat(f)+"&cellularIp=".concat(v)+"&sim0Imsi=".concat(g)+"&sim1Imsi=".concat(w)+"&softver=".concat(I)+"&fileType=".concat(e.fileType)+"&sort_signalDailyAvg=".concat(y)+"&sort_uptime=".concat(b)+"&sort_sim0FlowMonth=".concat(k)+"&sort_sim1FlowMonth=".concat(M)+"&sort_sim0FlowTotal=".concat(S)+"&sort_sim1FlowTotal=".concat(E)+"&sort_gmtModified=".concat(x))}),this.getColumns=(()=>{var e=this.props,t=e.showField,a=void 0===t?[]:t,l=e.app.user;return[{title:"\u8bbe\u5907\u5e8f\u5217\u53f7",dataIndex:"sn",columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u8bbe\u5907\u5e8f\u5217\u53f7",allowClear:!0}))}},{title:"\u540d\u79f0",dataIndex:"name",columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u540d\u79f0",allowClear:!0}))},check:()=>{return a.includes("name")}},{title:"\u5728\u7ebf\u72b6\u6001",dataIndex:"online",columnSearch:!0,searchComponent:e=>{return p.default.createElement(d.default,(0,c.default)({},e,{style:{width:184,display:"block"},placeholder:"\u5728\u7ebf\u72b6\u6001",allowClear:!0}),p.default.createElement(M,{value:"true"},"\u5728\u7ebf"),p.default.createElement(M,{value:"false"},"\u79bb\u7ebf"))},check:()=>{return a.includes("online")},render:e=>{return e?p.default.createElement(i.default,{status:"success",text:"\u5728\u7ebf"}):p.default.createElement(i.default,{status:"error",text:"\u79bb\u7ebf"})}},{title:"\u8d44\u4ea7\u72b6\u6001",dataIndex:"assetState",columnSearch:!0,searchComponent:e=>{return p.default.createElement(d.default,(0,c.default)({},e,{style:{width:184,display:"block"},placeholder:"\u8d44\u4ea7\u72b6\u6001",allowClear:!0}),p.default.createElement(M,{value:"UNREGISTER"},"\u672a\u6ce8\u518c"),p.default.createElement(M,{value:"NORMAL"},"\u6b63\u5e38"),p.default.createElement(M,{value:"DISABELED"},"\u505c\u7528"))},check:()=>{return a.includes("assetState")},render(e){switch(e){case"UNREGISTER":return"\u672a\u6ce8\u518c";case"NORMAL":return"\u6b63\u5e38";case"DISABELED":return"\u505c\u7528";default:return"-"}}},{title:"\u578b\u53f7",dataIndex:"model",check:()=>{return a.includes("model")},columnSearch:!0,searchComponent:e=>{return p.default.createElement(v.default,(0,c.default)({dataUrl:"/dev/getModels",textName:"name",valueName:"id",searchName:"name",width:188},e))}},{title:"\u6807\u7b7e",dataIndex:"tags",columnSearch:!0,searchComponent:e=>{return p.default.createElement("div",null,p.default.createElement(w.default,e))},check:()=>{return a.includes("tags")},render:e=>{return e&&e.length?e.map((t,a)=>{var l="".concat(t.title,"/").concat(t.content);if(a<2){var n=p.default.createElement(o.default,{onClick:t=>{t.stopPropagation(),this.tagModalShow(e)},key:"".concat(t.title,"-").concat(a)},l.length>20?"".concat(l.substring(0,20),"..."):l);return l.length>20?p.default.createElement(r.default,{title:"".concat(t.title,"/").concat(t.content),key:"".concat(t.title,"-").concat(a)},n):n}if(2===a)return p.default.createElement("span",{key:"".concat(t.title,"-").concat(a)},"...")}):"-"}},{title:"\u5730\u5740",dataIndex:"address",columnSearch:!0,searchComponent:e=>{return p.default.createElement("div",null,p.default.createElement(g.default,e))},check:()=>{return a.includes("address")},render:(e,t)=>{return t.country||t.region||t.locality||t.street?"".concat(t.country||"").concat(t.region||"").concat(t.locality||"").concat(t.street||""):"-"}},{title:"\u5ba2\u6237",dataIndex:"companyId",columnSearch:!0,searchComponent:e=>{return p.default.createElement(v.default,(0,c.default)({dataUrl:"/company/list",textName:"name",valueName:"id",searchName:"name",width:200,optionsData:{name:"--\u672a\u7ed1\u5ba2\u6237--",id:-1}},e))},check:()=>{return"undefined"!==typeof l.companyUser&&!l.companyUser&&a.includes("companyName")},render:(e,t)=>{return t.companyName||"-"}},{title:"\u73af\u56de\u53e30IP",dataIndex:"loopback0Ip",check:()=>{return a.includes("loopback0Ip")},columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u73af\u56de\u53e30IP",allowClear:!0}))}},{title:"\u73af\u56de\u53e31IP",dataIndex:"loopback1Ip",check:()=>{return a.includes("loopback1Ip")},columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u73af\u56de\u53e31IP",allowClear:!0}))}},{title:"\u8702\u7a9d\u63a5\u53e3IP",dataIndex:"cellularIp",check:()=>{return a.includes("cellularIp")},columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u4e0a\u7f51\u5361IP",allowClear:!0}))}},{title:"\u53611IMSI",dataIndex:"sim0Imsi",check:()=>{return a.includes("sim0Imsi")},columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u53611IMSI",allowClear:!0}))}},{title:"\u53612IMSI",dataIndex:"sim1Imsi",check:()=>{return a.includes("sim1Imsi")},columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u53612IMSI",allowClear:!0}))}},{title:"\u8f6f\u4ef6\u7248\u672c\u53f7",dataIndex:"softver",check:()=>{return a.includes("softver")},columnSearch:!0,searchComponent:e=>{return p.default.createElement(s.default,(0,c.default)({},e,{style:{width:188,display:"block"},placeholder:"\u8f6f\u4ef6\u7248\u672c\u53f7",allowClear:!0}))}},{title:"\u5f53\u524d\u4e0a\u7f51\u5361",dataIndex:"currentSim",check:()=>{return a.includes("currentSim")}},{title:"IPsec\u96a7\u9053\u6570\u91cf",dataIndex:"ipSecTunnel",check:()=>{return a.includes("ipSecTunnel")},render:e=>{return e||0}},{title:"\u4fe1\u53f7",dataIndex:"signalDailyAvg",sorter:!0,sortDirections:["descend","ascend"],check:()=>{return a.includes("signalDailyAvg")},render:e=>{return e?e+"dBm":"-"}},{title:"\u8fd0\u884c\u65f6\u957f",dataIndex:"uptime",sorter:!0,sortDirections:["descend","ascend"],check:()=>{return a.includes("uptime")},render:e=>{return e?(0,I.timestampHumanize)(1e3*e,2):"0\u79d2"}},{title:"\u53611\u672c\u6708\u6d41\u91cf",sorter:!0,sortDirections:["descend","ascend"],dataIndex:"sim0FlowMonth",check:()=>{return a.includes("sim0FlowMonth")},render:e=>{if(e){var t=(0,y.flowParse)(e);return"".concat(t.flow).concat(t.unit)}return"0B"}},{title:"\u53612\u672c\u6708\u6d41\u91cf",sorter:!0,sortDirections:["descend","ascend"],dataIndex:"sim1FlowMonth",check:()=>{return a.includes("sim1FlowMonth")},render:e=>{if(e){var t=(0,y.flowParse)(e);return"".concat(t.flow).concat(t.unit)}return"0B"}},{title:"GPS",dataIndex:"gps",check:()=>{return a.includes("gps")},render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-",t=arguments.length>1?arguments[1]:void 0;return 0!==t.lat&&!t.lat||0!==t.lng&&!t.lng||(e=t.lng+","+t.lat),e}},{title:"\u53611\u603b\u6d41\u91cf",dataIndex:"sim0FlowTotal",sorter:!0,sortDirections:["descend","ascend"],check:()=>{return a.includes("sim0FlowTotal")},render:e=>{if(e){var t=(0,y.flowParse)(e);return"".concat(t.flow).concat(t.unit)}return"0B"}},{title:"\u53612\u603b\u6d41\u91cf",dataIndex:"sim1FlowTotal",sorter:!0,sortDirections:["descend","ascend"],check:()=>{return a.includes("sim1FlowTotal")},render:e=>{if(e){var t=(0,y.flowParse)(e);return"".concat(t.flow).concat(t.unit)}return"0B"}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"gmtModified",sorter:!0,sortDirections:["descend","ascend"],check:()=>{return a.includes("gmtModified")}}]}),this.tagModalCancel=(()=>{this.setState({tagModalVisible:!1})}),this.tagModalShow=(e=>{this.setState({tagModalVisible:!0,tags:e})}),this.showAllTags=(()=>{var e=this.state.tags,t=void 0===e?[]:e;return t.map((e,a)=>{var l="".concat(e.title,"/").concat(e.content),n=p.default.createElement(o.default,{onClick:e=>{e.stopPropagation(),this.tagModalShow(t)},key:"".concat(e.title,"-").concat(a)},l.length>20?"".concat(l.substring(0,20),"..."):l);return l.length>20?p.default.createElement(r.default,{title:"".concat(e.title,"/").concat(e.content),key:"".concat(e.title,"-").concat(a)},n):n})}),this.fieldChange=(e=>{var t=this.props.dispatch,a=e.join(","),l=[];this.field.forEach(e=>{a.includes(e)&&l.push(e)}),t({type:"devServiceMaintainList/fieldConfig",payload:{fields:l,success:()=>{this.setState({fieldModalVisible:!1})}}})}),this.fieldModalCancel=(()=>{this.setState({fieldModalVisible:!1})}),this.fieldModalShow=(()=>{this.setState({fieldModalVisible:!0})}),this.state={exportVisible:!1,tagModalVisible:!1,tags:[],fieldModalVisible:!1},this.field=["name","online","assetState","model","tags","address","companyName","loopback0Ip","loopback1Ip","cellularIp","sim0Imsi","sim1Imsi","softver","currentSim","ipSecTunnel","signalDailyAvg","uptime","sim0FlowMonth","sim1FlowMonth","gps","sim0FlowTotal","sim1FlowTotal","gmtModified"]}render(){var e=this.props,t=e.loading,a=e.logs,l=e.showField,r=e.app.user,o=this.state,i=o.exportVisible,s=o.tagModalVisible,c=o.fieldModalVisible;return p.default.createElement("div",null,p.default.createElement(m.Grid,{dynamicColumn:!0,empty:"-",formprop:{initNums:4,inline:!0},columns:this.getColumns(),loading:t,data:a,refersh:this.refersh,toolBtns:2!==r.roleId?[{icon:"download",text:"\u5bfc\u51fa",handler:this.showExportModal},{icon:"edit",text:"\u5b57\u6bb5\u8bbe\u7f6e",handler:this.fieldModalShow},{icon:"reload",text:"\u5237\u65b0",type:"primary",handler:()=>this.refersh()}]:[{icon:"reload",text:"\u5237\u65b0",type:"primary",handler:()=>this.refersh()}]}),p.default.createElement(h.default,{visible:i,title:"\u5bfc\u51fa",onCancel:this.hideExportModal,onSubmit:this.logsExport}),p.default.createElement(n.default,{footer:null,visible:s,title:"\u6240\u6709\u6807\u7b7e",onCancel:this.tagModalCancel,bodyStyle:{maxHeight:400,overflowY:"auto"}},this.showAllTags()),p.default.createElement(f.default,{value:l,visible:c,onOk:this.fieldChange,onCancel:this.fieldModalCancel}))}}function E(e){var t=e.devServiceMaintainList,a=e.app,l=e.loading;return{logs:t,showField:t.showField,loading:l.models.devServiceMaintainList,filter:t.filter,app:a}}var x=(0,u.connect)(E)(S);t.default=x}}]);