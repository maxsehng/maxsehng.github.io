(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[88],{czJx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(r("xwgP")),i=r("8ur3"),n=r("pG04");function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=i?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(a,n,l):a[n]=e[n]}return a.default=e,r&&r.set(e,a),a}class o extends a.Component{constructor(e){var t;super(e),t=this,this.getColumns=(()=>{var e=this.props.app;return[{title:"\u6635\u79f0",dataIndex:"realName"},{title:"\u7528\u6237\u540d",dataIndex:"loginName"},{title:"\u89d2\u8272",dataIndex:"roleId",render:t=>{return e.roles[t+""]}},{title:"\u7535\u8bdd",dataIndex:"phone",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return e}}]}),this.getFilterItems=(()=>{return[{text:"\u6635\u79f0",name:"name",type:"input"},{text:"\u7528\u6237\u540d",name:"loginName",type:"input"}]}),this.insertFields=(()=>{var e=this.props.app,t=[],r=Object.keys(e.roles);return r.forEach(r=>{var a={};a.value=parseInt(r),a.text=e.roles[r],t.push(a)}),[{text:"\u6635\u79f0",name:"realName",type:"input",validate:[{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6635\u79f0"}],trigger:["onBlur","onChange"]}]},{text:"\u7528\u6237\u540d",name:"loginName",type:"input",validate:[{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u6237\u540d"}],trigger:["onBlur","onChange"]}]},{text:"\u89d2\u8272",name:"roleId",type:"select",options:t,validate:[{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272"}],trigger:["onBlur","onChange"]}]},{text:"\u7535\u8bdd",name:"phone",type:"input",validate:[{rules:[{required:!1,validator:(e,t,r)=>{var a=/^1(3|4|5|6|7|8|9)\d{9}$/,i=/^(0[0-9]{2,3}-?)?([2-9][0-9]{6,7})?$/;!t||a.test(t)||i.test(t)?r():r("\u7535\u8bdd\u53f7\u7801\u9519\u8bef")}}],trigger:["onBlur"]}]}]}),this.editFields=(()=>{return[{text:"\u6635\u79f0",name:"realName",type:"input",validate:[{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6635\u79f0"}],trigger:["onBlur","onChange"]}]},{text:"\u7528\u6237\u540d",name:"loginName",type:"input",validate:[{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u6237\u540d"}],trigger:["onBlur","onChange"]}]},{text:"\u7535\u8bdd",name:"phone",type:"input",validate:[{rules:[{required:!1,validator:(e,t,r)=>{var a=/^1(3|4|5|6|7|8|9)\d{9}$/,i=/^(0[0-9]{2,3}-?)?([2-9][0-9]{6,7})?$/;!t||a.test(t)||i.test(t)?r():r("\u7535\u8bdd\u53f7\u7801\u9519\u8bef")}}],trigger:["onBlur"]}]}]}),this.refersh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,i=t.props.dispatch;i({type:"user/fetch",payload:{filter:e,pageNo:r,pageSize:a}})},this.add=((e,t)=>{var r=this.props.dispatch;r({type:"user/add",payload:{values:e},callback:t})}),this.edit=((e,t)=>{var r=this.props.dispatch;r({type:"user/edit",payload:{values:e},callback:t})}),this.del=(e=>{var t=e.id,r=this.props.dispatch;r({type:"user/del",payload:{id:t}})}),this.reloadPWD=(e=>{var t=e.loginName,r=this.props.dispatch;r({type:"user/resetpwd",payload:{loginName:t}})}),this.render=(()=>{var e=this.props,t=e.user,r=e.loading,i=e.app,s=this.getColumns();return console.log(i),a.default.createElement("div",null,a.default.createElement(n.Grid,{formprop:{initNums:2},filterInline:!0,filterItems:this.getFilterItems(),columns:s,loading:r,data:t,insertFields:this.insertFields(),editFields:this.editFields(),del:2!=sessionStorage.getItem("roleId")&&this.del,insert:2!=sessionStorage.getItem("roleId")&&this.add,edit:2!=sessionStorage.getItem("roleId")&&this.edit,refersh:this.refersh,actions:2!=sessionStorage.getItem("roleId")?[{icon:"reload",text:"\u91cd\u7f6e\u5bc6\u7801",confirm:"\u8bf7\u786e\u8ba4\u91cd\u7f6e\u5bc6\u7801\u5417?",handler:e=>{this.reloadPWD(e)}}]:[]}))}),this.state={mapVisible:!1,latlng:""}}}function d(e){var t=e.user,r=e.loading,a=e.app;return{user:t,loading:r.models.user,app:a}}var p=(0,i.connect)(d)(o);t.default=p}}]);