(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"3lNT":function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=v(a("xwgP"));a("/gTo");var r=n(a("rP0n")),s=a("8ur3"),i=(n(a("s21K")),n(a("N1TV"))),o=n(a("FCNh")),d=n(a("d78K")),u=n(a("fK+4")),c=n(a("nz+F")),p=a("t3Un"),f=n(a("4W/l"));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class m extends l.Component{constructor(e){super(e),this.devDetailStateHandler=(e=>{this.setState({show:e})}),this.loadMarkerCluster=(()=>{window.BMapLib&&window.BMapLib.TextIconOverlay||(0,i.default)("http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js",()=>{window.BMapLib&&window.BMapLib.MarkerClusterer||(0,i.default)("/js/BDMarkerClusterer.js",()=>{this.onLoadClusterSuccess()})}),window.BMapLib&&window.BMapLib.MarkerClusterer&&!this.markerCluster&&this.onLoadClusterSuccess()}),this.componentDidMount=(()=>{var e=this.props,t=e.map,a=e.devInfo.devs;if(t){this.map=t;var n=[];if(a)for(var l in a)n.push(this.addMarker(a[l]));this.showMarkers||this.loadMarkerCluster(),f.default.on("closeDevDetails",()=>{this.setState({show:!1}),this.map.closeInfoWindow()})}}),this.removeMarker=(e=>{var t=this.props.map;t&&this.showMarkers&&this.showMarkers.removeMarker(e)}),this.componentWillReceiveProps=(e=>{var t=e.devInfo.devs,a=e.map,n=e.mapdevQueryAt,l=e.mapdevChange,r=e.devDetailClose;if(r!==this.props.devDetailClose&&r&&this.setState({show:!r}),l||!n){if(a){this.map=a;var s=[];for(var i in this.markers){var o=this.markers[i],d=t[i];d||(this.markers[i]=null,delete this.markers[i],s.push(o))}var u=[];for(var c in t){var p=t[c],f=this.markers[c];if(f){if(f.status&&p.status&&f.status.online!==p.status.online){var h=this.getIcon(p.online);f.setIcon(h)}}else u.push(this.addMarker(p))}this.showMarkers?u.length||s.length?this.showMarkers.addAndRemoveMarkers(u,s):this.showMarkers.resetCluster():window.BMapLib&&window.BMapLib.MarkerClusterer&&this.onLoadClusterSuccess()}}else this.showMarkers&&this.showMarkers.resetCluster()}),this.componentWillUnmount=(()=>{var e=this.props.dispatch;e({type:"dashboard/resetFilter"}),this.markers={},this.map.clearOverlays(),f.default.removeAllListeners("closeDevDetails")}),this.onLoadClusterSuccess=(()=>{var e=this.props.map,t=[];for(var a in this.markers)t.push(this.markers[a]);t.length&&(this.showMarkers=new window.BMapLib.MarkerClusterer(e,{markers:t}))}),this.onMarkerClick=(e=>{var t=e.target,a=this.props,n=a.resetDevDetailClose,l=a.selectDev,r=this;(0,p.post)("/dev/findBySn",{sn:t.sn}).then(e=>{if(e){n();var a=document.createElement("div"),s="".concat(e.country?e.country:"").concat(e.region?e.region:"").concat(e.locality&&e.locality!==e.region?e.locality:"").concat(e.street?e.street:""),i=r.getMarkerInfo(t.sn,t.online,s);u.default.render(i,a);var o=new window.BMap.InfoWindow(a);r.infoWindow=o,r.map.openInfoWindow(o,new window.BMap.Point(t.lng,t.lat)),r.setState({show:!0,devDetails:e}),l&&l(t.lat,t.lng)}})}),this.getMarkerInfo=((e,t,a)=>{return l.default.createElement("div",{style:{lineHeight:"22px"}},l.default.createElement(r.default,{status:t?"success":"error"}),"\u8bbe\u5907\u5e8f\u5217\u53f7:",l.default.createElement("span",{style:{marginLeft:14}},e),l.default.createElement("br",null),l.default.createElement("span",null,"\u5730\u5740\uff1a",a))}),this.addMarker=(e=>{var t=e.lat,a=e.lng,n=e.sn,l=e.status;l=void 0===l?{}:l;var r=l.online,s=e.country,i=e.region,o=e.locality,d=e.street,u=new window.BMap.Marker(new window.BMap.Point(a,t));return u.setIcon(this.getIcon(r)),u.sn=n,u.online=r,u.lng=a,u.lat=t,u.address="".concat(s||"").concat(i||"").concat(o&&o!==i?o:"").concat(d||""),this.markers[n]=u,u.addEventListener("click",this.onMarkerClick),u}),this.getIcon=(e=>{return this.icons[e]||(this.icons[e]=new window.BMap.Icon(e?d.default:o.default,new window.BMap.Size(40,42))),this.icons[e]}),this.render=(()=>{var e=this.state,t=e.show,a=e.devDetails;return l.default.createElement("div",{style:{position:"absolute",top:14,left:8}},l.default.createElement(c.default,{show:t,devDetails:a,devDetailStateHandler:this.devDetailStateHandler}))}),this.markers={},this.icons={},this.showMarkers=null,this.state={show:!1,devDetails:{}}}}function g(e){var t=e.dashboard,a=t.devInfo,n=t.mapdevQueryAt,l=t.mapdevChange;return{devInfo:a,mapdevQueryAt:n,mapdevChange:l}}m.defaultProps={devs:[]};var y=(0,s.connect)(g)(m);t.default=y},"47MB":function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=p(a("xwgP"));a("NWD0");var r=n(a("2L3m"));a("4ADO");var s=n(a("wty1")),i=a("8ur3"),o=n(a("55KC")),d=n(a("hvEY")),u=n(a("6IxH"));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class f extends l.Component{constructor(e){super(e),this.getDevInfo=((e,t,a,n)=>{var l=this.props.dispatch;l({type:"dashboard/getDevInfo",payload:{minLng:e,minLat:t,maxLng:a,maxLat:n}})})}render(){return l.default.createElement("div",null,l.default.createElement("div",{style:{overflow:"hidden"}},l.default.createElement(d.default,null)),l.default.createElement(r.default,{style:{marginTop:24}},l.default.createElement(s.default,{span:24},l.default.createElement(u.default,null))),l.default.createElement(r.default,{style:{marginTop:24}},l.default.createElement(s.default,{span:24},l.default.createElement(o.default,{mapType:"baidu",boundsChanged:this.getDevInfo}))))}}function h(e){var t=e.app,a=e.loading;return{app:t,loading:a.models.dashboard}}var v=(0,i.connect)(h)(f);t.default=v},"55KC":function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=p(a("xwgP"));a("Gcrx");var r=n(a("Wyac")),s=a("8ur3"),i=n(a("KNN1")),o=n(a("wpuI")),d=n(a("TTlN")),u=n(a("4W/l"));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class f extends l.Component{constructor(){super(...arguments),this.getDevInfo=((e,t,a,n,l)=>{var r=this.props,s=r.dispatch,i=r.filter,o=i&&i.sn,d=i&&i.areaInfo,u=i&&i.tagInfo;e&&(this.status=e),s({type:"dashboard/getDevInfo",payload:{status:e,minLng:t,minLat:a,maxLng:n,maxLat:l,sn:o,areaInfo:d,tagInfo:u}})}),this.noSearchData=((e,t,a)=>{var n=this.props,l=n.language,r=n.dispatch;if(this.map)if("zh-CN"===l){var s=this.map.getBounds();if(s){var i=s.getNorthEast().lng,o=s.getNorthEast().lat,d=s.getSouthWest().lng,u=s.getSouthWest().lat;r({type:"dashboard/getDevInfo",payload:{status:this.status,minLng:d,minLat:u,maxLng:i,maxLat:o,sn:e,areaInfo:t,tagInfo:a}})}}else{var c=this.map.getBounds();if(c){var p=c.getNorthEast().lng(),f=c.getNorthEast().lat(),h=c.getSouthWest().lng(),v=c.getSouthWest().lat();r({type:"dashboard/getDevInfo",payload:{status:this.status,minLng:h,minLat:v,maxLng:p,maxLat:f,sn:e,areaInfo:t,tagInfo:a}})}}}),this.search=(e=>{var t=this.props,a=t.language,n=t.dispatch;u.default.emit("closeDevDetails"),e.language=a,e&&""===e.tagInfo&&(e.tagInfo=null),n({type:"dashboard/formSearch",payload:{filter:e},callback:{onSuccess:this.fitBounds,onError:this.noSearchData}})}),this.fitBounds=(e=>{var t=this.props.language;if(this.map){var a=e;if("zh-CN"===t){if("COORDINATE"===a.type){var n=new window.BMap.Point(a.lng,a.lat);this.map.setViewport([n]),this.map.panTo(n)}else if("BOUNDS"===a.type){var l=new window.BMap.Point(a.minLng,a.minLat),r=new window.BMap.Point(a.maxLng,a.maxLat);this.map.setViewport([l,r])}}else if("COORDINATE"===a.type){var s=new window.google.maps.LatLng({lat:a.lat,lng:a.lng});this.map.setZoom(18),this.map.panTo(s)}else if("BOUNDS"===e.type){var i=new window.google.maps.LatLng({lat:a.minLat,lng:a.minLng}),o=new window.google.maps.LatLng({lat:a.maxLat,lng:a.maxLng}),d=new window.google.maps.LatLngBounds(i,o);this.map.fitBounds(d)}}}),this.getMap=(e=>{var t=this.props.bounds;this.map=e,t&&this.fitBounds(t)}),this.resetInit=(()=>{var e=this.props.dispatch;e({type:"dashboard/init",payload:{init:!1}})}),this.render=(()=>{var e=this.props,t=e.remoteConfigLoading,a=e.devInfo,n=e.language,s=e.location,u=e.init,c=e.devDetails;return l.default.createElement(r.default,{spinning:t},l.default.createElement("div",{key:"mapId",style:{backgroundColor:"#ffffff",padding:"20px 30px 44px 30px",overflow:"hidden"}},l.default.createElement("div",{style:{height:"40px",borderBottom:"solid 2px #f4f5f7",marginBottom:10}},l.default.createElement("span",{style:{lineHeight:"20px",color:"#666666",fontWeight:"bold"}},"\u90e8\u7f72\u4f4d\u7f6e")),l.default.createElement("div",{style:{overflow:"hidden",marginTop:18,marginBottom:30}},l.default.createElement(d.default,{onSearch:this.search})),l.default.createElement("div",{style:{height:"600px",marginTop:10}},"zh-CN"===n?s.BPiont?l.default.createElement(o.default,{totalNum:a.total,onlineNum:a.online,offlineNum:a.offline,boundsChanged:this.getDevInfo,getMap:this.getMap,center:s.BPiont,init:u,resetInit:this.resetInit,devDetails:c}):null:s.GPiont?l.default.createElement(i.default,{totalNum:a.total,onlineNum:a.online,offlineNum:a.offline,boundsChanged:this.getDevInfo,getMap:this.getMap,center:s.GPiont,init:u,resetInit:this.resetInit,devDetails:c}):null)))})}}function h(e){var t=e.app,a=t.language,n=t.user.location,l=e.dashboard,r=l.devInfo,s=l.filter,i=l.bounds,o=l.init,d=l.devDetails,u=e.dashboardhandle.remoteConfigLoading;return{language:a,devInfo:r,filter:s,bounds:i,location:n,init:o,devDetails:d,remoteConfigLoading:u}}var v=(0,s.connect)(h)(f);t.default=v},"7T0F":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE1QzNDNkY2NUM2MzExRUFBOTcwQjUyRkJCM0ZDMzRDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE1QzNDNkY3NUM2MzExRUFBOTcwQjUyRkJCM0ZDMzRDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTVDM0M2RjQ1QzYzMTFFQUE5NzBCNTJGQkIzRkMzNEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTVDM0M2RjU1QzYzMTFFQUE5NzBCNTJGQkIzRkMzNEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ngr7XAAACIElEQVR42nzUTUgWURTGcc3XTNPESlAXRgS2ibQosKgWZQZRGxECkcAgkQhCjegLQwjUiog0CMJECCISCbSk2rgok1wUBX70IWmLLHORKRFl9j/xDFxuM174wTvzzpw599xzb3x98824kJGDChRjDTIxhQ/owW28C3txkXe9GOcximqMoQHlqMcrVGEEN7DMDxhzfqfjAfJxFtfwIySJoziIRmzXLMb9DBPQgVXYhksRwWz8htVpM+bQjTQ/oGW0Ffvx0nk5CVeQGBLYyrELK9HsBrQbJzSFF95Lh3EMGyKyndD/VoJ1QUAr+B9c9h5Oximt7pa46GGlequP/wtYhIeY9R6sxBdNp9C5n4dDzvU8OrE7CLgar71gKcquDn1ewDOqa4pzb0QfSrCAK/DVC3gEH7WCz5GLLGTjAL5rAYMxqU5JjalGmVpJS30JNqFM0/mGIdXRFqdXWVtJPuGp3rcWmrGA77Eev9CO5WjVFgtGP3YoO9uSb7AX17UGazFsQWPaHRexVCsWNp6hRVvykTIvdFqvBPeCi7tqm5oFWqNfpbiqYO4o0wHSHgS0Gjbh5AINPKQ+vRVyKl3QVhx0t16TCt2FgpCANoNar1dt3z9Whxz397KtUKn25xM9kByRbUyNPaBW2YfpsOPL2mMnzulMtMa+r/pZn2Vgo/rPerJNdZ+OOg9t/MRprahlsUftYa30WSe2tcodtc5/468AAwDQf32NuwyNFAAAAABJRU5ErkJggg=="},Erbi:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=u(a("xwgP"));a("NWD0");var r=n(a("2L3m"));a("4ADO");var s=n(a("wty1"));a("nhND");var i=n(a("t/i1")),o=n(a("n/fD"));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class c extends l.Component{constructor(){super(...arguments),this.render=(()=>{var e=this.props.data,t=e.registered,a=e.faultDevs,n=e.upCountToday;return l.default.createElement("div",{style:{height:162,borderRadius:4,color:"#666",overflow:"hidden",boxShadow:"3px 3px 5px 0px rgba(8, 20, 47, 0.1)",backgroundColor:"#fff"}},l.default.createElement("div",{style:{padding:"24px 32px"}},l.default.createElement("div",{style:{marginBottom:15}},l.default.createElement("img",{src:o.default,style:{display:"inline-block",marginRight:"9px",height:"20px"}}),l.default.createElement("span",{style:{display:"inline-block",fontSize:"14px",lineHeight:"20px",fontWeight:"bold"}},"\u8bbe\u5907\u6570\u91cf")),l.default.createElement("div",{style:{marginTop:22}},l.default.createElement(r.default,{gutter:40},l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u6ce8\u518c",value:t})),l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u4eca\u65e5\u4e0a\u7ebf",value:n})),l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u544a\u8b66\u8bbe\u5907",value:a}))))))})}}t.default=c},FCNh:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAqCAYAAAA9IzKsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRFMDc5RkYwMjA0MjExRTk5OTk3QTE1Q0U0NDUzQTJEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRFMDc5RkYxMjA0MjExRTk5OTk3QTE1Q0U0NDUzQTJEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEUwNzlGRUUyMDQyMTFFOTk5OTdBMTVDRTQ0NTNBMkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEUwNzlGRUYyMDQyMTFFOTk5OTdBMTVDRTQ0NTNBMkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Yp7+wAAAFg0lEQVR42qxYa2wUVRg989ilUIOlBUQKpdLUgoBWiIUAGiGGlhIkysMgoiYqhocYQhUkamJ8pC0aYpRnVFREEmIAHxWIGl8/lKIUKYItD0HaQqSt0Ne22525fvfu3XZndtqd3e2XnHQ7cx/n3jn3+86M4lv6OFyGQphCyCfkEXIIaYQbCdcJDYQqwlHCYcIvBOZqYBckBhCWEVYRsuA+zhHeJewgtPXWUI0y0EJCNWFTjAQg22+S/RfGQ6I/YSdhLyEdiUW6HOdDOa4rEimEbwnRxaIoUAYMcEvmMTluiv2G7vD8DxEmO6ujP7TcXKiTJkLNyoKSOih4nTGwq/Uwq6pg/H4M5sk/Ab/faYSpcvyZ4TqxC3MX4ZGIrl4v9IJ86IWzBZFowZqaYHxVhsA3tHDDdGryCWGpE4nFhE8jnldmJjyrVkAZOiRmMZh/X0DnO5vB6uudbj9M2BNO4gbCGcIwC4EJ4+FdTSezXz9Xk7K6OnS+T/rTdWhT8qDdczdYSwv8JRvBamrtza8QsgktIWEujyCQOQreZ59xTUCsaPhweF/aAO+a1WCtbfCXvkUDqfAWrYWSEqFHPt+K0OngWGm57fHAs2K50EIswWppJ7btgFFxHPqc2dDnzhH/K4NS4Fn2pDhNtuDzqpzAdMIoy5GZUwhl2E0xa0BJHw593lywixfR+fEuqOPHQRk8GOap0+K3lneXvUsGn5+TmGW5nNQPWsGsyFXWU2kwDBdMVOgPLQKaW8AuXYI2fRqMYxXBxc2736lHviqLUVdoEyc6JqBAWRkJ73JUDoH9B8AaG6HemQvz8hXSyc1Ae3uQ34h0qKNH27vk8WQ1xiLI3DvQF6FNm9otsaee6B7/9gkwz58Pb5rDd2KQPS84BqmdtbZGFydv0+bruViNvsV+KZWTSLI80iGDnRNPbS3Ms+eiJ6izZ2HW1PQsmdRU+6VkTqIxvCBB03pbZ+LPKVJvzbp0RENDhUjkei2Yw8zTf8GsrAw2vXYd5olKBNraep/E3wnj1yPiZIiaw+tNeL7xRfSv4ySo5GFs11ob6qlOBDkZP/wozjhXtZIxsqse9GpQcm4VFdSsPiOgTZoEZeSI7r1saLR3qeQkygkLwouOJkmIQW8bC8/yp8UxY5QnlOTk7gH/uwZl4EDqZID5fOI3a2iAkpYm/nasKYrUzIWIRZTzff/J0uiPE87n//MvEdj7meVa56a3YRyvQOC77xHY+RFYczM6nlvf6ylyGP9nXbpjLmexZ8bR36AvWWxZsch2C+ZHCJMXK15nhJbumymqZ9K2zUIDTCYoi6xJJ+Y5S46o4zvBSXDXsZuwTlzu6IBR9jX0RUFvalRUwCx6PvZT4GBmAvsO2C9xE2WG7N0WwtqQ3QscPAx1MvmBwgKoY3ISSJt6MG3LHebWL5yTnLfLY/4jXdWjwR6GcETeFzdAnXFvwqmBXapB53sfMPkCFYo9cl6L236da62r479X4S/e2JM1c2/x6DT4i0sZfL5wAnye15wsf3Voe8Ltmv/lV2AcKY9LE4FDh+F/9Q1+auxuZoucz9Ft82J2ym71BNvsbNJIvrD8vaZ2Luzyo1T6D4pFOAT3luPCy4XTu+gDhH09FiA6ugplRTUjQ9g24UF97SI5meSozKrqnt45QvEgYb+bF2Ln94/Ew/K+Ee1ddGX4M+ujqI4w1FFINMl60tJHBPg48+W4MX0a4DV8icyoCZ1SOc7JeL9PfNGVzuOPdXKcuD+S8HiTUBwngWLZH4mS4EHlEltjJLBV9kNfkWBS2dtdtt8u27O+JBEiwl+cS6K0K5XtXLtiNcYt5gOvl2AO916QQozJlqtxCq5EZr6QfeqQNiAuAasJHL3d8tsTdyozZEqOK/4XYACZ+NyYzWIAMwAAAABJRU5ErkJggg=="},KNN1:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("vJ22");var l=n(a("BPQb"));a("/gTo");var r=n(a("rP0n")),s=n(a("z9WB")),i=c(a("xwgP")),o=n(a("fK+4")),d=n(a("TpZb"));function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class p extends i.Component{constructor(e){super(e),this.selectedDev=((e,t)=>{this.setState({selectedDevLoc:{lat:e,lng:t}})}),this.onMapInit=(e=>{var t,a=this.props,n=a.getMap,l=a.center;this.map=e,t=l||{lng:104.07,lat:30.67},e.setCenter(t),e.setZoom(7),e.setOptions({disableDefaultUI:!0}),window.google.maps.event.addListener(e,"idle",()=>this.boundsChanged()),n(e),setTimeout(()=>{this.boundsChanged()},300)}),this.boundsChanged=(e=>{var t=this.props.boundsChanged,a=this.state.selectedDevLoc,n=this.state.status;e||(e=n);var l=this.map.getBounds();if(l){var r=l.getNorthEast().lng(),s=l.getNorthEast().lat(),i=l.getSouthWest().lng(),o=l.getSouthWest().lat();if(t(e,i,o,r,s),a&&a.lat&&a.lng){var d={lat:a.lat,lng:a.lng};l.contains(d)?this.setState({devDetailClose:!1}):this.setState({devDetailClose:!0})}}}),this.createInfo=((e,t)=>{var a=document.createElement("div"),n=i.default.createElement("div",null,"haha");o.default.render(n,a);var l=this.createPopupClass(),r=new l(e.getPosition(),a);return r}),this.createPopupClass=(()=>{function e(e,t){this.position=e,t.classList.add("popup-bubble");var a=document.createElement("div");a.classList.add("popup-bubble-anchor"),a.appendChild(t),this.containerDiv=document.createElement("div"),this.containerDiv.classList.add("popup-container"),this.containerDiv.appendChild(a),window.google.maps.OverlayView.preventMapHitsAndGesturesFrom(this.containerDiv)}return e.prototype=Object.create(window.google.maps.OverlayView.prototype),e.prototype.onAdd=function(){this.getPanes().floatPane.appendChild(this.containerDiv)},e.prototype.onRemove=function(){this.containerDiv.parentElement&&this.containerDiv.parentElement.removeChild(this.containerDiv)},e.prototype.draw=function(){var e=this.getProjection().fromLatLngToDivPixel(this.position),t=Math.abs(e.x)<4e3&&Math.abs(e.y)<4e3?"block":"none";"block"===t&&(this.containerDiv.style.left=e.x+"px",this.containerDiv.style.top=e.y-40+"px"),this.containerDiv.style.display!==t&&(this.containerDiv.style.display=t)},e}),this.onChange=(e=>{this.setState({status:e.target.value}),this.boundsChanged(e.target.value)}),this.componentWillReceiveProps=(e=>{var t;this.map&&e.init&&(t=e.center?e.center:{lng:104.07,lat:30.67},this.boundsChanged(),this.map.setCenter(t),this.map.setZoom(13),e.resetInit())}),this.resetDevDetailClose=(()=>{this.setState({devDetailClose:!1})}),this.devs=[{sn:"",online:!0,marker:""}],this.markerCluster=null,this.state={status:"all",devDetailClose:!1}}render(){var e=this.props,t=e.onlineNum,a=e.offlineNum,n=e.totalNum,o=this.state.devDetailClose;return i.default.createElement("div",{style:{background:"#fff",height:600,position:"relative"}},i.default.createElement(s.default,{id:"map",onMapInit:this.onMapInit},this.map?i.default.createElement(d.default,{map:this.map,devDetailClose:o,resetDevDetailClose:this.resetDevDetailClose,selectDev:this.selectedDev}):null),i.default.createElement(l.default.Group,{size:"small",style:{position:"absolute",top:14,right:12},onChange:this.onChange},i.default.createElement(l.default.Button,{value:"online"},i.default.createElement(r.default,{status:"success",style:{top:"1px"}}),"\u5728\u7ebf:",t),i.default.createElement(l.default.Button,{value:"offline"},i.default.createElement(r.default,{status:"error",style:{top:"1px"}}),"\u79bb\u7ebf:",a),i.default.createElement(l.default.Button,{value:"all"},"\u5168\u90e8:",n)))}}var f=p;t.default=f},OPfY:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("exa0");var l=n(a("KiF4"));a("SMEU");var r=n(a("xc0u"));a("Mf8d");var s=n(a("4OHk")),i=n(a("xwgP"));class o extends i.default.Component{render(){var e=this.props,t=e.visible,a=e.onClose,n=e.handelCancel,o=e.handleStatus,d=e.handleType,u=e.handelResult;return i.default.createElement(l.default,{title:d,visible:t,footer:null,onCancel:a},i.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:150}},"FINISH"===u?i.default.createElement("div",{style:{display:"flex"}},i.default.createElement(s.default,{style:{fontSize:30,color:"#2fc25b"},type:"check-circle"}),i.default.createElement("span",{style:{lineHeight:"30px",marginLeft:15,color:"#2fc25b"}},"\u64cd\u4f5c\u6210\u529f")):"FAILED"===u?i.default.createElement("div",{style:{display:"flex"}},i.default.createElement(s.default,{style:{fontSize:30,color:"#ff0000"},type:"close-circle"}),i.default.createElement("span",{style:{lineHeight:"30px",marginLeft:15,color:"#ff0000"}},"\u64cd\u4f5c\u5931\u8d25")):i.default.createElement(s.default,{style:{fontSize:40},type:"loading"}),i.default.createElement("div",{style:{marginTop:20,fontSize:14}},i.default.createElement("span",null,d?"".concat(d," :"):null),i.default.createElement("span",{style:{marginLeft:10}},o))),"FINISH"!==u&&"FAILED"!==u?i.default.createElement(r.default,{onClick:n,style:{width:200,marginLeft:135,marginTop:30},type:"primary"},"\u53d6\u6d88",d):null)}}t.default=o},Pbnh:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=c(a("xwgP"));a("NWD0");var r=n(a("2L3m"));a("4ADO");var s=n(a("wty1"));a("nhND");var i=n(a("t/i1")),o=n(a("7T0F")),d=a("03Q9");function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class p extends l.Component{constructor(){super(...arguments),this.render=(()=>{var e=this.props,t=e.devNum,a=e.totalFlow,n=e.avgFlow,u=(0,d.flowParse)(a),c=(0,d.flowParse)(n);return l.default.createElement("div",{style:{height:162,borderRadius:4,color:"#666",overflow:"hidden",boxShadow:"3px 3px 5px 0px rgba(8, 20, 47, 0.1)",backgroundColor:"#fff"}},l.default.createElement("div",{style:{padding:"24px 32px"}},l.default.createElement("div",{style:{marginBottom:15}},l.default.createElement("img",{src:o.default,style:{display:"inline-block",marginRight:"9px",height:"20px"}}),l.default.createElement("span",{style:{display:"inline-block",fontSize:"14px",lineHeight:"20px",fontWeight:"bold"}},"\u6d41\u91cf\u60c5\u51b5")),l.default.createElement("div",{style:{marginTop:22}},l.default.createElement(r.default,{gutter:4},l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u8bbe\u5907\uff08\u53f0\uff09",value:t})),l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u603b\u6d41\u91cf\uff08"+u.unit+"/\u6708\uff09",value:u.flow})),l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u5e73\u5747\u6d41\u91cf\uff08"+c.unit+"/\u5929\uff09",value:c.flow}))))))})}}t.default=p},RdX8:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=u(a("xwgP"));a("NWD0");var r=n(a("2L3m"));a("4ADO");var s=n(a("wty1"));a("nhND");var i=n(a("t/i1")),o=n(a("dn3q"));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class c extends l.Component{constructor(){super(...arguments),this.render=(()=>{var e=this.props,t=e.onlineRate,a=e.onlineNum,n=e.curFault;return l.default.createElement("div",{style:{height:162,borderRadius:4,color:"#666",overflow:"hidden",boxShadow:"3px 3px 5px 0px rgba(8, 20, 47, 0.1)",backgroundColor:"#fff"}},l.default.createElement("div",{style:{padding:"24px 32px"}},l.default.createElement("div",{style:{marginBottom:15}},l.default.createElement("img",{src:o.default,style:{display:"inline-block",marginRight:"9px",height:"20px"}}),l.default.createElement("span",{style:{display:"inline-block",fontSize:"14px",lineHeight:"20px",fontWeight:"bold"}},"\u5b9e\u65f6\u4fe1\u606f")),l.default.createElement("div",{style:{marginTop:22}},l.default.createElement(r.default,{gutter:40},l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u5728\u7ebf\u6570\uff08\u53f0\uff09",value:a})),l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u5728\u7ebf\u7387(%)",value:t})),l.default.createElement(s.default,{span:8},l.default.createElement(i.default,{valueStyle:{color:"#13c2c2"},title:"\u5b9e\u65f6\u544a\u8b66",value:n}))))))})}}t.default=c},TTlN:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=f(a("xwgP"));a("C1KP");var r=n(a("d6B9")),s=n(a("zAuD")),i=n(a("BG4o")),o=n(a("mK77")),d=(n(a("s21K")),n(a("aESv"))),u=n(a("J1Jx")),c=n(a("pOAv"));a("t3Un");function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class h extends l.Component{constructor(e){super(e),this.search=(()=>{var e=this.props,t=e.form,a=e.onSearch,n=e.formprops;n&&n.loading||t.validateFields({force:!0},e=>{if(!e){var n=(0,o.default)({},t.getFieldsValue());for(var l in n)if(n[l]&&"function"===typeof n[l].value)return n[l].value();a(n)}})});var t=e.onValuesChange;this.Form=(0,d.default)({onValuesChange:t})}render(){var e=this.props,t=e.form,a=(0,i.default)(e,["form"]),n=[{name:"areaInfo",component:l.default.createElement(u.default,null),text:"\u5730\u533a"},{name:"tagInfo",text:"\u6807\u7b7e",component:l.default.createElement(c.default,null)},{name:"sn",type:"input",text:"\u8bbe\u5907\u5e8f\u5217\u53f7"}];return l.default.createElement(this.Form,(0,s.default)({form:t,isGrid:!0,fields:n,inline:!0,initNums:3,okText:"\u67e5\u8be2",okBtnStyle:{type:"default"},canelBtn:!1,card:!1,onSubmit:this.search},a))}}var v=r.default.create()(h);t.default=v},TpZb:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=v(a("xwgP"));a("/gTo");var r=n(a("rP0n")),s=a("8ur3"),i=(n(a("s21K")),n(a("FCNh"))),o=n(a("d78K")),d=n(a("fK+4")),u=n(a("nz+F")),c=n(a("N1TV")),p=a("t3Un"),f=n(a("4W/l"));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class m extends l.Component{constructor(e){super(e),this.devDetailStateHandler=(e=>{this.setState({show:e})}),this.componentDidMount=(()=>{var e=this.props,t=e.map,a=e.devInfo.devs;if(t){this.map=t;var n=[];if(a)for(var l in a)n.push(this.addMarker(a[l]));this.showMarkers?this.showMarkers.addMarkers(n):this.onLoadClusterSuccess(),f.default.on("closeDevDetails",()=>{this.setState({show:!1}),this.marker&&this.marker.infoWindow&&this.marker.infoWindow.close()})}}),this.componentWillReceiveProps=(e=>{var t=e.devInfo.devs,a=e.map,n=e.devDetailClose;if(n!==this.props.devDetailClose&&n&&this.setState({show:!n}),this.map=a,a){var l=[];for(var r in this.markers){var s=this.markers[r],i=t[r];i||(this.markers[r]=null,delete this.markers[r],l.push(s))}var o=[];for(var d in t){var u=t[d],c=this.markers[d];if(c){if(c.status&&u.status&&c.status.online!==u.status.online){var p=this.getIcon(u.online);c.setIcon(p)}}else o.push(this.addMarker(u))}this.showMarkers?(o.length||l.length)&&(this.showMarkers.removeMarkers(l),this.showMarkers.addMarkers(o)):this.onLoadClusterSuccess()}}),this.componentWillUnmount=(()=>{var e=this.props.dispatch;for(var t in e({type:"dashboard/resetFilter"}),this.markers)this.markers[t].setMap(null);this.markers={},f.default.removeAllListeners("closeDevDetails")}),this.onLoadClusterSuccess=(()=>{var e=this.props.map,t=[];for(var a in this.markers)t.push(this.markers[a]);t.length&&(window.MarkerClusterer?this.showMarkers=new window.MarkerClusterer(e,t,{imagePath:"/img/dashboard/m"}):(0,c.default)("/js/markerclusterer.js",()=>{this.showMarkers=new window.MarkerClusterer(e,t,{imagePath:"/img/dashboard/m"})}))}),this.onMarkerClick=(e=>{this.marker=e;var t=this.props,a=t.map,n=t.resetDevDetailClose,l=t.selectDev,r=this;(0,p.post)("/dev/findBySn",{sn:e.sn}).then(t=>{if(t){n();var s=document.createElement("div"),i="".concat(t.country?t.country:"").concat(t.region?t.region:"").concat(t.locality&&t.locality!==t.region?t.locality:"").concat(t.street?t.street:""),o=r.getMarkerInfo(e.sn,e.online,i);for(var u in d.default.render(o,s),e.infoWindow||(e.infoWindow=new window.google.maps.InfoWindow({content:s})),e.infoWindow.setContent(s),r.markers)r.markers[u].infoWindow&&r.markers[u].infoWindow.close();e.infoWindow.open(a,e),r.setState({show:!0,devDetails:t}),l&&l(e.position.lat(),e.position.lng())}})}),this.addMarker=(e=>{var t=e.lat,a=e.lng,n=e.sn,l=e.status;l=void 0===l?{}:l;var r=l.online,s=e.country,d=e.region,u=e.locality,c=e.street,p=this.props.map,f=new window.google.maps.Marker({position:{lat:t,lng:a},map:p,icon:r?o.default:i.default});return f.sn=n,f.online=r,f.address="".concat(s||"").concat(d||"").concat(u&&u!==d?u:"").concat(c||""),this.markers[n]=f,f.addListener("click",()=>{this.onMarkerClick(f)}),f}),this.getMarkerInfo=((e,t,a)=>{return l.default.createElement("div",{style:{lineHeight:"22px"}},l.default.createElement(r.default,{status:t?"success":"error"}),"\u8bbe\u5907\u5e8f\u5217\u53f7:",l.default.createElement("span",{style:{marginLeft:14}},e),l.default.createElement("br",null),l.default.createElement("span",null,"\u5730\u5740\uff1a",a))}),this.render=(()=>{var e=this.state,t=e.show,a=e.devDetails;return l.default.createElement("div",{style:{position:"absolute",top:14,left:8}},l.default.createElement(u.default,{show:t,devDetails:a,devDetailStateHandler:this.devDetailStateHandler}))}),this.markers={},this.icons={},this.showMarkers=null,this.onLoadClusterSuccess(),this.state={show:!1,devDetails:{}}}}function g(e){var t=e.dashboard.devInfo;return{devInfo:t}}m.defaultProps={devs:[]};var y=(0,s.connect)(g)(m);t.default=y},dn3q:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIwMzE3Q0NFNUM2MzExRUFCREIyREI4OTVGMDdDMUM2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIwMzE3Q0NGNUM2MzExRUFCREIyREI4OTVGMDdDMUM2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjAzMTdDQ0M1QzYzMTFFQUJEQjJEQjg5NUYwN0MxQzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjAzMTdDQ0Q1QzYzMTFFQUJEQjJEQjg5NUYwN0MxQzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4Wvmv3AAABbUlEQVR42pzUSyhEURzH8RkGZUFZeSUspAkLtrJQFrZeWVh4NVtZWVjRJKUQZiOsRBZIXktWllhIsSJKWJmy8Rrfv/73dprua/zr09zumfObM/d/7glPLK6FAtYbvnCNI6zixfxClk9ADgr0Wj4rMIZiXGEUYa+waszhBs94NcbecYYRNKETK1agGZaNKZziEW0oQq7Lqh/QikpdbSiiAzJhF5+oQzLgc/xAHy6xaYXN6MPtwE8os3qCdDEmYQ3oRu0/gqzake5K2AAWAv61mMv9fNRIWDu6AgSNa6fdalLCqnQbeNW0x1hSd8FfN1M+m7cXhS5jedo8O+wWUVy4TNjy+KFGnW+/AfsBn5lT9eDADFvGMEoyDCpFv863w+6xhA2PV8dpK6wjgbv0Fz2uN09Q7hNUhmNdRNzpCJKODmIb55hHs3bL6lqLbm4Z39Pvp8ywiHEtA7O6/CHdW1E9Tb71UDxEffqhaNWvAAMAab1Jux8OzOMAAAAASUVORK5CYII="},hvEY:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=p(a("xwgP"));a("NWD0");var r=n(a("2L3m"));a("4ADO");var s=n(a("wty1")),i=a("8ur3"),o=n(a("Pbnh")),d=n(a("RdX8")),u=n(a("Erbi"));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class f extends l.Component{constructor(){super(...arguments),this.render=(()=>{var e=this.props,t=e.assertProfile,a=t.total,n=t.curMonthFlow,i=t.avgFlow,c=t.onlineRate,p=t.registered,f=t.upCountToday,h=t.online,v=t.faultDevs,m=e.app.currentFaults,g={registered:p,upCountToday:f,faultDevs:v};return l.default.createElement(r.default,{gutter:40},l.default.createElement(s.default,{span:8},l.default.createElement(o.default,{devNum:a,totalFlow:n,avgFlow:i})),l.default.createElement(s.default,{span:8},l.default.createElement(u.default,{data:g})),l.default.createElement(s.default,{span:8},l.default.createElement(d.default,{onlineRate:c,onlineNum:h,curFault:m.totalRemindShow})))})}}function h(e){var t=e.app,a=e.dashboard.assertProfile;return{app:t,assertProfile:a}}var v=(0,i.connect)(h)(f);t.default=v},"n/fD":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFBOUYzRjczNUM2MzExRUFCRDQyOEU3NzE4REQ1MjRFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFBOUYzRjc0NUM2MzExRUFCRDQyOEU3NzE4REQ1MjRFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUE5RjNGNzE1QzYzMTFFQUJENDI4RTc3MThERDUyNEUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUE5RjNGNzI1QzYzMTFFQUJENDI4RTc3MThERDUyNEUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7lhFzWAAAA+0lEQVR42mJsnDyPAQmkA7EVEMcjiQkA8UUg1gfiD0jih4C4DogPwASYGFCBAhAroYnxAbEclEYG8kAshSyAbhhFYNSwATaMBYnNAU1THGjJAxb9cmjqQWwxqPofyIaBXHgUiI2g/LtYLD6MRawfiGOB2ASI/8MMswNiAyA2B+I3JPhMBIiPQ/UfhBkWB8T7gfgUicF0D6oPlP0OgrzHBcQhQLyIzHBfBNXPBXJZABDzArErEFuTYRg3VH8gCzQAPwKxJCgQyTCMEao/FmSYPRAnA/FyCpJYJBDPBRl2G4ijgPgPBYaB9N8GGZYCxEuAeBUFht0C4hiAAAMAFbYlhKm9MCMAAAAASUVORK5CYII="},"nz+F":function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=v(a("xwgP"));a("Mf8d");var r=n(a("4OHk"));a("0rfI");var s=n(a("vyZY"));a("SMEU");var i,o=n(a("xc0u")),d=a("8ur3"),u=n(a("RXvK")),c=n(a("OPfY")),p=a("J92R"),f=n(a("xjUU"));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class m extends l.Component{constructor(e){super(e),this.UNSAFE_componentWillReceiveProps=(e=>{var t=e.devDetails,a=e.devDetailStateHandler;t!==this.props.devDetails&&a(!0)}),this.hide=(()=>{var e=this.props.devDetailStateHandler;e&&e(!1)}),this.display=(()=>{var e=this.props.devDetailStateHandler;e&&e(!0)}),this.netRestart=(()=>{var e=this.props,t=e.dispatch,a=e.devDetails.sn;this.setState({statusVisible:!0}),t({type:"dashboardhandle/netRestart",payload:{sn:a},callback:{onSuccess:this.loopFetch}})}),this.loopFetch=(e=>{this.firstFetch(e),clearInterval(i),i=null,i=setInterval(()=>{this.firstFetch(e)},5e3)}),this.firstFetch=(e=>{var t=this.props.dispatch;t({type:"dashboardhandle/loopStatus",payload:{id:e},callback:{onSuccess:this.checkStatus}})}),this.checkStatus=(e=>{var t=this.props.app.constants;this.setState({handleStatus:t.state[e.state],handleType:t.action[e.type]}),e.result&&(this.setState({handelResult:e.result}),clearInterval(i),i=null)}),this.closeStatusModal=(()=>{var e=this.props.dispatch;clearInterval(i),i=null,this.setState({statusVisible:!1,handleStatus:"",handleType:"",handelResult:"",loading:!1}),e({type:"dashboardhandle/clearData"})}),this.handelCancel=(()=>{var e=this.props.dispatch;e({type:"dashboardhandle/handelCancel"}),this.closeStatusModal()}),this.openConfig=(()=>{var e=this.props,t=e.dispatch,a=e.devDetails;t({type:"dashboardhandle/configCtrl",payload:{sn:a.sn,open:!0},callback:{onSuccess:this.configModalVisible}})}),this.configModalVisible=((e,t)=>{var a=t.url,n=this.props.devDetails.sn;if(this.setState({configVisible:e,url:a}),!e&&n){var l=this.props.dispatch;l({type:"dashboardhandle/configCtrl",payload:{sn:n,open:!1}})}}),this.openPortModal=(()=>{var e=this.props,t=e.dispatch,a=e.devDetails.sn;t({type:"dashboardhandle/fetchOpenPort",payload:{sn:a}}),this.setState({portVisible:!0,sn:a})}),this.closePortModal=(()=>{this.setState({portVisible:!1})}),this.portSubmit=(e=>{var t=e.destIp,a=e.destPort,n=this.props,l=n.dispatch,r=n.devDetails.sn;l({type:"dashboardhandle/handleOpenPort",payload:{sn:r,destIp:t,destPort:a}})}),this.closeOpenPort=(e=>{var t=e.destIp,a=e.destPort,n=e.platIp,l=e.platPort,r=e.sign,s=this.props,i=s.dispatch,o=s.devDetails.sn;i({type:"dashboardhandle/closeOpenPort",payload:{sn:o,destIp:t,destPort:a,platIp:n,platPort:l,sign:r}})}),this.render=(()=>{var e=this.props,t=e.devDetails,a=e.show,n=e.dashboardhandle,i=e.loading,d=e.app.user,h=this.state,v=h.configVisible,m=h.url,g=h.statusVisible,y=h.handleStatus,b=h.handleType,w=h.handelResult,M=h.portVisible,E=h.sn;return a?l.default.createElement("div",{style:{width:312,backgroundColor:"#ffffff",borderRadius:6,position:"relative"}},l.default.createElement(p.Link,{to:"/devdetail/?sn=".concat(t.sn)},l.default.createElement(o.default,{style:{position:"absolute",top:43,right:15},type:"primary",size:"small"},"\u8be6\u60c5")),l.default.createElement("div",{style:{height:33,background:"#0f1922",borderTopRightRadius:6,borderTopLeftRadius:6}}),l.default.createElement("div",{style:{padding:"30px 30px 0"}},l.default.createElement("div",{style:{marginBottom:20}},l.default.createElement("span",null,"\u5e8f\u5217\u53f7\uff1a"),l.default.createElement("span",null,t.sn)),l.default.createElement("div",{style:{marginBottom:20}},l.default.createElement("span",null,"\u8bbe\u5907\u578b\u53f7\uff1a"),l.default.createElement("span",null,t.model)),d.companyUser?null:l.default.createElement("div",{style:{marginBottom:20}},l.default.createElement("span",null,"\u6240\u5c5e\u5ba2\u6237\uff1a"),l.default.createElement("span",null,t.company?t.company:"\u6682\u672a\u5206\u914d")),l.default.createElement("div",{style:{paddingBottom:10,borderBottom:"1px dashed #e6e6e6"}},l.default.createElement("span",null,"\u6807\u7b7e\uff1a"),l.default.createElement("span",null,t.tags&&t.tags.length>0?t.tags.map((e,t)=>{return t<=3?l.default.createElement("span",{key:"".concat(e.title).concat(e.content).concat(e.id),style:{display:"inline-block",padding:"3px 8px",border:"1px solid #e6e6e6",borderRadius:4,margin:"0 10px 10px 0"}},l.default.createElement("span",null,e.title,"/",e.content)):4===t?l.default.createElement("span",{key:"".concat(e.title).concat(e.content).concat(e.id),style:{marginLeft:5}},"..."):null}):l.default.createElement("span",null,"\u6682\u65e0\u6807\u7b7e"))),l.default.createElement("div",{style:{marginTop:20,paddingBottom:16}},t.status&&!t.status.online||2==window.sessionStorage.getItem("roleId")?l.default.createElement(o.default,{disabled:!0},"\u91cd\u542f"):l.default.createElement(s.default,{placement:"bottom",title:"\u662f\u5426\u91cd\u542f",onConfirm:this.netRestart,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},l.default.createElement(o.default,null,"\u91cd\u542f")),l.default.createElement(o.default,{disabled:t.status&&!t.status.online||2==window.sessionStorage.getItem("roleId"),onClick:this.openConfig,style:{margin:"0 5px"}},"\u8fdc\u7a0b\u914d\u7f6e"),l.default.createElement(o.default,{disabled:t.status&&!t.status.online||2==window.sessionStorage.getItem("roleId"),onClick:this.openPortModal},"\u7aef\u53e3\u6620\u5c04")),l.default.createElement("div",{style:{position:"absolute",top:0,right:5,cursor:"pointer",width:33,height:33},onClick:this.hide},l.default.createElement(r.default,{type:"close",style:{fontSize:10,margin:11,color:"#909fa8"}})),l.default.createElement(u.default,{visible:v,sn:t.sn,url:m,onCancel:()=>this.configModalVisible(!1,{sn:"",url:""})}),l.default.createElement(c.default,{visible:g,onClose:this.closeStatusModal,handelCancel:this.handelCancel,handleStatus:y,handleType:b,handelResult:w}),l.default.createElement(f.default,{visible:M,sn:E,onClose:this.closePortModal,onSubmit:this.portSubmit,openPort:n.openPort,closeOpenPort:this.closeOpenPort,loading:i}))):!a&&t.sn?l.default.createElement("div",{onClick:this.display,style:{backgroundColor:"#fff",textAlign:"center",width:40,height:40,fontSize:30,display:"table-cell",verticalAlign:"middle",cursor:"pointer"}}):l.default.createElement("div",null)}),this.state={configVisible:!1,url:"",statusVisible:!1,handleStatus:"",handleType:"",handelResult:""}}}function g(e){var t=e.app,a=e.dashboardhandle,n=e.loading;return{app:t,dashboardhandle:a,loading:n.effects["dashboardhandle/handleOpenPort"]}}var y=(0,d.connect)(g)(m);t.default=y},wpuI:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("vJ22");var l=n(a("BPQb"));a("/gTo");var r=n(a("rP0n")),s=n(a("wRRY")),i=u(a("xwgP")),o=n(a("3lNT"));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=l?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}class c extends i.Component{constructor(e){super(e),this.selectedDev=((e,t)=>{this.setState({selectedDevLoc:{lat:e,lng:t}})}),this.onMapInit=(e=>{var t,a=this.props,n=a.getMap,l=a.center;this.map=e,n(e),t=l?new window.BMap.Point(l.lng,l.lat):new window.BMap.Point(104.07,30.67),e.centerAndZoom(t,7),this.boundsChanged(),e.addEventListener("zoomend",()=>{this.boundsChanged()}),e.addEventListener("moveend",()=>{this.boundsChanged()})}),this.boundsChanged=(e=>{var t=this.props.boundsChanged,a=this.state.selectedDevLoc,n=this.state.status;e||(e=n);var l=this.map.getBounds();if(l){var r=l.getNorthEast().lng,s=l.getNorthEast().lat,i=l.getSouthWest().lng,o=l.getSouthWest().lat;if(t(e,i,o,r,s),a&&a.lat&&a.lng){var d=new window.BMap.Point(a.lng,a.lat);l.containsPoint(d)?this.setState({devDetailClose:!1}):this.setState({devDetailClose:!0})}}}),this.onChange=(e=>{this.setState({status:e.target.value}),this.boundsChanged(e.target.value)}),this.resetDevDetailClose=(()=>{this.setState({devDetailClose:!1})}),this.state={status:"all",devDetailClose:!1}}render(){var e=this.props,t=e.onlineNum,a=e.offlineNum,n=e.totalNum,d=this.state,u=d.devDetailClose,c=d.status;return i.default.createElement("div",{style:{background:"#fff",height:600,position:"relative"}},i.default.createElement(s.default,{id:"map",onMapInit:this.onMapInit},this.map?i.default.createElement(o.default,{map:this.map,devDetailClose:u,resetDevDetailClose:this.resetDevDetailClose,status:c,selectDev:this.selectedDev}):null),i.default.createElement(l.default.Group,{size:"small",style:{position:"absolute",top:14,right:12},onChange:this.onChange},i.default.createElement(l.default.Button,{value:"online"},i.default.createElement(r.default,{status:"success",style:{top:"-2px"}}),"\u5728\u7ebf ",t),i.default.createElement(l.default.Button,{value:"offline"},i.default.createElement(r.default,{status:"error",style:{top:"-2px"}}),"\u79bb\u7ebf ",a),i.default.createElement(l.default.Button,{value:"all"},"\u5168\u90e8 ",n)))}}var p=c;t.default=p},xjUU:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("kYD1");var l=n(a("dzgx"));a("Mf8d");var r=n(a("4OHk")),s=n(a("xwgP")),i=n(a("henA")),o=n(a("R3Dh"));class d extends s.default.Component{constructor(e){super(e),this.handleCloseTag=(e=>{var t=this.props.closeOpenPort;t&&t(e)}),this.render=(()=>{var e=this.props,t=e.visible,a=e.onClose,n=e.onSubmit,d=e.openPort,u=e.sn,c=e.loading;return u?(this.fields=[{text:"IP",name:"destIp",component:s.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u6216\u9009\u62e9IP",sn:u}),validate:[{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6216\u9009\u62e9IP"},{message:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684IP\u5730\u5740",validator:(e,t,a)=>{if(t){var n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/;if(!n.test(t))return a("\u8bf7\u8f93\u5165\u5408\u6cd5\u7684IP\u5730\u5740")}a()}}],trigger:["onBlur","onChange"]}]},{text:"\u7aef\u53e3\u53f7",name:"destPort",type:"input",validate:[{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7aef\u53e3\u53f7"}],trigger:["onBlur","onChange"]}]}],s.default.createElement(i.default,{title:"\u7aef\u53e3\u6620\u5c04",visible:t,fields:this.fields,onCancel:a,onSubmit:n,confirmLoading:c},s.default.createElement("div",null,s.default.createElement("div",null,"\u5df2\u5f00\u542f\u6620\u5c04:"),s.default.createElement("div",null,d.length>0?d.map((e,t)=>{return s.default.createElement("div",{key:"".concat(e.destIp).concat(e.destPort).concat(e.platIp).concat(e.platPort).concat(t),style:{marginTop:15,textAlign:"center",border:"1px solid #dedede",borderRadius:"5",lineHeight:"26px",overflow:"hidden"}},s.default.createElement(r.default,{onClick:()=>this.handleCloseTag(e),style:{float:"right",fontSize:14,margin:"6px 15px",cursor:"pointer"},type:"close"}),s.default.createElement("span",null,"".concat(e.platIp,":").concat(e.platPort)," -- ","".concat(e.destIp,":").concat(e.destPort)))}):s.default.createElement(l.default,{image:l.default.PRESENTED_IMAGE_SIMPLE}))))):s.default.createElement("div",null)})}}t.default=d}}]);