(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[77],{Ufo9:function(t,e,o){"use strict";var n=o("mZ4U");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=f(o("xwgP")),i=o("8ur3"),a=o("pG04"),s=o("7Qib"),l=n(o("4zaf"));function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(p=function(t){return t?o:e})(t)}function f(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var o=p(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var a=r?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,o&&o.set(t,n),n}class d extends r.Component{constructor(t){var e;super(t),e=this,this.filterItems=(()=>{var t=this.props.onofflog.date;return[{text:"\u8bbe\u5907\u5e8f\u5217\u53f7",name:"sn",type:"input"},{text:"\u65f6\u95f4",name:"date",value:t,type:"daterange"}]}),this.refersh=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=e.props.dispatch;r({type:"onofflog/fetch",payload:{filter:t,pageNo:o,pageSize:n}})},this.hideExportModal=(()=>{this.setState({exportVisible:!1})}),this.showExportModal=(()=>{this.setState({exportVisible:!0})}),this.logsExport=(t=>{var e=this.props.onofflog.filter,o=e&&e.sn?e.sn:"",n=e&&e.start?e.start:"",r=e&&e.end?e.end:"";window.open("/api/onofflog/export?sn=".concat(o,"&start=").concat(n,"&end=").concat(r,"&fileType=").concat(t.fileType))}),this.state={exportVisible:!1},this.columns=[{title:"\u8bbe\u5907\u5e8f\u5217\u53f7",dataIndex:"sn"},{title:"\u4e0a\u7ebf\u65f6\u95f4",dataIndex:"onTime"},{title:"\u79bb\u7ebf\u65f6\u95f4",dataIndex:"offTime"},{title:"\u5728\u7ebf\u65f6\u957f",dataIndex:"duration",render:t=>{return(0,s.timestampHumanize)(t)}}]}render(){var t=this.props,e=t.loading,o=t.onofflog,n=this.state.exportVisible;return r.default.createElement("div",null,r.default.createElement(a.Grid,{formprop:{initNums:2},filterItems:this.filterItems(),columns:this.columns,loading:e,data:o,refersh:this.refersh,toolBtns:[{icon:"download",text:"\u65e5\u5fd7\u5bfc\u51fa",handler:this.showExportModal}]}),r.default.createElement(l.default,{visible:n,title:"\u65e5\u5fd7\u5bfc\u51fa",onCancel:this.hideExportModal,onSubmit:this.logsExport}))}}function u(t){var e=t.app,o=t.onofflog,n=t.loading;return{app:e,onofflog:o,loading:n.models.onofflog}}var c=(0,i.connect)(u)(d);e.default=c}}]);