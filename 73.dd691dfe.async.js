(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[73],{"2lQO":function(t,e,n){"use strict";var r=n("mZ4U");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=d(n("xwgP")),a=n("8ur3"),i=n("pG04"),s=r(n("4zaf"));function l(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var i=o?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}class p extends o.Component{constructor(t){var e;super(t),e=this,this.filterItems=(()=>{var t=this.props.gpsLog.date;return[{text:"\u8bbe\u5907\u5e8f\u5217\u53f7",name:"sn",type:"input"},{text:"\u65f6\u95f4",name:"date",value:t,type:"daterange"}]}),this.refersh=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=e.props.dispatch;o({type:"gpsLog/fetch",payload:{filter:t,pageNo:n,pageSize:r}})},this.hideExportModal=(()=>{this.setState({exportVisible:!1})}),this.showExportModal=(()=>{this.setState({exportVisible:!0})}),this.logsExport=(t=>{var e=this.props.gpsLog.filter,n=e&&e.sn?e.sn:"",r=e&&e.start?e.start:"",o=e&&e.end?e.end:"";window.open("/api/gpsLog/export?sn=".concat(n,"&start=").concat(r,"&end=").concat(o,"&fileType=").concat(t.fileType))}),this.state={exportVisible:!1,confirmLoading:!1},this.columns=[{title:"\u8bbe\u5907\u5e8f\u5217\u53f7",dataIndex:"sn"},{title:"\u540d\u79f0",dataIndex:"name",render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return t}},{title:"\u5730\u5740",dataIndex:"address",render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-";return t}},{title:"\u7ecf\u5ea6",dataIndex:"lon"},{title:"\u7eac\u5ea6",dataIndex:"lat"},{title:"\u65f6\u95f4",dataIndex:"date"}]}render(){var t=this.props,e=t.loading,n=t.gpsLog,r=this.state.exportVisible;return o.default.createElement("div",null,o.default.createElement(i.Grid,{formprop:{initNums:2},filterItems:this.filterItems(),columns:this.columns,loading:e,data:n,refersh:this.refersh,toolBtns:[{icon:"download",text:"\u65e5\u5fd7\u5bfc\u51fa",handler:this.showExportModal}]}),o.default.createElement(s.default,{visible:r,title:"\u65e5\u5fd7\u5bfc\u51fa",onCancel:this.hideExportModal,onSubmit:this.logsExport}))}}function u(t){var e=t.gpsLog,n=t.loading;return{gpsLog:e,loading:n.models.gpsLog}}var c=(0,a.connect)(u)(p);e.default=c}}]);